(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{1372:function(a,s,t){"use strict";t.r(s);var e=[function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"_1-1-安装-larabbs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装-larabbs","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.1 安装 LaraBBS")]),e("p",[e("a",{attrs:{href:"https://github.com/summerblue/larabbs",target:"_blank",rel:"noopener noreferrer"}},[a._v("LaraBBS")]),a._v(" 是在  Web 开发实战进阶 ( Laravel 5.5 )中一步一步搭建的论坛系统，接下来我们基于这套论坛系统，完成 API 部分的训练。")]),e("blockquote",[e("p",[a._v("学习过 L02 的同学，如果你已经部署好了 LaraBBS的开发环境，可以跳过这一步。")])]),e("h2",{attrs:{id:"做好准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#做好准备","aria-hidden":"true"}},[a._v("#")]),a._v(" 做好准备")]),e("p",[a._v("由于我们接下来的开发都会在 Homestead 上进行，因此，在开始本章教程之前，请保证你的 Homestead 虚拟机已成功开启并登录。使用下面命令来启动和登录 Homestead：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Homestead "),e("span",{attrs:{class:"token operator"}},[a._v("&&")]),a._v(" vagrant up\n"),e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" vagrant "),e("span",{attrs:{class:"token function"}},[a._v("ssh")]),a._v("\n")])]),e("p",[a._v("在虚拟机中进入 Code 文件夹：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Code\n")])]),e("blockquote",[e("p",[a._v("注意：本书中因为虚拟机的存在，我们会有两个运行命令行的环境，一个是主机，另一个是 Homestead 虚拟机。我们会在命令的前面使用『命令行提示符』来区分主机和 Homestead。请记住以 > 开头的命令是运行在主机里，$ 开头的命令是运行在 Homestead 虚拟机里。详见 写作约定 - 命令行提示符。")])]),e("h2",{attrs:{id:"composer-加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#composer-加速","aria-hidden":"true"}},[a._v("#")]),a._v(" Composer 加速")]),e("p",[a._v("在创建项目之前，我们先在虚拟机中运行以下命令来实现 Composer 安装加速 ：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ composer config -g repo.packagist composer https://packagist.phpcomposer.com\n")])]),e("h2",{attrs:{id:"安装-larabbs-应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-larabbs-应用","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 LaraBBS 应用")]),e("p",[a._v("如果你已经购买并完成了上一本教程，那么你的 github 上应该有一个自己的 larabbs 项目，比如 "),e("code",[a._v("git@github.com:<username>/larabbs.git")]),a._v("，或者你可以 fork 一份，总之，你需要在 github 上有一个自己的 larabbs 项目，这样有助于你进行接下来的练习。\n"),e("img",{attrs:{src:t(797),alt:"file"}})]),e("p",[a._v("假设你已经准备好了自己的 larabbs 的项目，注意请把下面的"),e("code",[a._v("<username>")]),a._v("替换为你的用户名。")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Code\n$ "),e("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" clone git@github.com:"),e("span",{attrs:{class:"token operator"}},[a._v("<")]),a._v("username"),e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v("/larabbs.git\n$ "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" larabbs\n$ composer "),e("span",{attrs:{class:"token function"}},[a._v("install")]),a._v("\n$ "),e("span",{attrs:{class:"token function"}},[a._v("cp")]),a._v(" .env.example .env\n")])]),e("p",[e("img",{attrs:{src:t(796),alt:"file"}})]),e("p",[a._v("中间省略掉安装细节...\n"),e("img",{attrs:{src:t(795),alt:"file"}})]),e("h2",{attrs:{id:"修改-hosts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hosts","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改 hosts")]),e("p",[a._v("每个 Laravel 项目创建完成后的第一步，即是对 Homestead 进行配置，让应用能在 Homestead 的开发环境上跑起来。")]),e("p",[a._v("为了方便记忆，一般我们都会将 IP 映射为域名，我们能够通过设置 hosts 文件来指定 IP 与域名之间的映射关系，由于我们在 Homestead 上默认使用 "),e("code",[a._v("192.168.10.10")]),a._v(" 来作为虚拟机的 IP 的地址，因此我们需要在系统的 "),e("code",[a._v("hosts")]),a._v(" 文件中将域名指向该 IP 上。")]),e("p",[a._v("Mac 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl /etc/hosts\n")])]),e("p",[a._v("Windows 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl C:/Windows/System32/Drivers/etc/hosts\n")])]),e("blockquote",[e("p",[a._v("Windows 下，如果你没有集成 subl 命令的话， 请使用编辑器直接打开文件，文件路径在 C:\\Windows\\System32\\Drivers\\etc\\hosts 。")])]),e("p",[a._v("文件成功打开后，在 hosts 文件最后面新增下面一行以完成设置：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("192.168.10.10   larabbs.test\n")])]),e("p",[a._v("因为最近 "),e("code",[a._v(".dev")]),e("code",[a._v(".app")]),a._v("域名在谷歌浏览器中被强制转跳到 https，所以我们使用 .test。")]),e("h2",{attrs:{id:"新增站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新增站点","aria-hidden":"true"}},[a._v("#")]),a._v(" 新增站点")]),e("p",[a._v("如果你安装了 Sublime Text，可通过运行下面命令打开 Homestead.yaml 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl ~/Homestead/Homestead.yaml\n")])]),e("p",[a._v("在 Homestead.yaml 文件中新增 larabbs 应用的 sites 和 databases 的相关设置：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("---\nip: "),e("span",{attrs:{class:"token string"}},[a._v('"192.168.10.10"')]),a._v("\nmemory: 2048\ncpus: 1\nprovider: virtualbox\n\nauthorize: ~/.ssh/id_rsa.pub\n\nkeys:\n    - ~/.ssh/id_rsa\n\nfolders:\n    - map: ~/Code\n      to: /home/vagrant/Code\n\nsites:\n    - map: homestead.app\n      to: /home/vagrant/Code/Laravel/public\n    - map: larabbs.test "),e("span",{attrs:{class:"token comment"}},[a._v("# <--- 这里")]),a._v("\n      to: /home/vagrant/Code/larabbs/public "),e("span",{attrs:{class:"token comment"}},[a._v("# <--- 这里")]),a._v("\n\ndatabases:\n    - homestead\n    - larabbs "),e("span",{attrs:{class:"token comment"}},[a._v("# <--- 这里")]),a._v("\n\nvariables:\n    - key: APP_ENV\n      value: local\n\n"),e("span",{attrs:{class:"token comment"}},[a._v("# blackfire:")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#     - id: foo")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       token: bar")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       client-id: foo")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       client-token: bar")]),a._v("\n\n"),e("span",{attrs:{class:"token comment"}},[a._v("# ports:")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#     - send: 93000")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       to: 9300")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#     - send: 7777")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       to: 777")]),a._v("\n"),e("span",{attrs:{class:"token comment"}},[a._v("#       protocol: udp")]),a._v("\n")])]),e("p",[a._v("我们主要设置了 "),e("code",[a._v("sites")]),a._v(" 和 "),e("code",[a._v("databases")]),a._v(" 两项。 "),e("code",[a._v("sites")]),a._v(" 会将域名 "),e("code",[a._v("larabbs.test")]),a._v(" 映射到虚拟机的 "),e("code",[a._v("/home/vagrant/Code/larabbs/public")]),a._v(" 文件夹上，而 "),e("code",[a._v("databases")]),a._v(" 则为新创建的项目指定数据库名。")]),e("h2",{attrs:{id:"重启虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启虚拟机","aria-hidden":"true"}},[a._v("#")]),a._v(" 重启虚拟机")]),e("p",[a._v("在我们每次对 Homestead.yaml 文件进行了更改之后，都需要运行下面命令来使其更改生效：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Homestead "),e("span",{attrs:{class:"token operator"}},[a._v("&&")]),a._v(" vagrant reload --provision\n")])]),e("ul",[e("li",[e("code",[a._v("vagrant provision")]),a._v(" 是命令 Vagrant 重新加载 "),e("code",[a._v("Homestead.yaml")]),a._v(" 配置；")]),e("li",[e("code",[a._v("vagrant reload")]),a._v(" 是重启虚拟机使更改生效。")])]),e("h2",{attrs:{id:"env-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env-文件","aria-hidden":"true"}},[a._v("#")]),a._v(" .env 文件")]),e("p",[a._v("接下来，我们还需要对应用根目录下的 .env 文件进行设置，为应用指定数据库名称 larabbs。")]),e("p",[a._v(".env")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("DB_DATABASE"),e("span",{attrs:{class:"token operator"}},[a._v("=")]),a._v("larabbs\n")])]),e("h2",{attrs:{id:"初始化命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 初始化命令")]),e("p",[a._v("进入 homestead")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Code/larabbs\n$ php artisan key:generate\n$ php artisan migrate --seed\n")])]),e("p",[e("img",{attrs:{src:t(794),alt:"file"}})]),e("h2",{attrs:{id:"访问应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问应用","aria-hidden":"true"}},[a._v("#")]),a._v(" 访问应用")]),e("p",[a._v("现在让我们在 Chrome 浏览器中打开 http://larabbs.test 你应该能看到有如下界面显示：\n"),e("img",{attrs:{src:t(793),alt:"file"}})])])}],r=t(0),n=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);s.default=n.exports},793:function(a,s,t){a.exports=t.p+"assets/img/1.1_5.8c5e993a.png"},794:function(a,s,t){a.exports=t.p+"assets/img/1.1_4.aa42f769.png"},795:function(a,s,t){a.exports=t.p+"assets/img/1.1_3.0e97527d.png"},796:function(a,s,t){a.exports=t.p+"assets/img/1.1_2.92d555c1.png"},797:function(a,s,t){a.exports=t.p+"assets/img/1.1_1.c3b88b2b.png"}}]);