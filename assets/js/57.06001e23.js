(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1601:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"reactive-基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactive-基础","aria-hidden":"true"}},[t._v("#")]),t._v(" Reactive 基础")]),s("ul",[s("li",[t._v("数据绑定概念")]),s("li",[t._v("Reactive 概念")]),s("li",[t._v("Object.defineProperty 介绍")]),s("li",[t._v("Reactive 实现")])]),s("h2",{attrs:{id:"数据绑定概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据绑定概念","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据绑定概念")]),s("ul",[s("li",[t._v("数据 → HTML 模板")]),s("li",[t._v("如何简化流程？")]),s("li",[t._v("data = newData")])]),s("p",[t._v("在一般情况下我们要把数据插入到模版上，我们需要请求数据，然后拼接字符串，在调用jQuery的方法来把模版插入到DOM中。有时候会将涉及到比较多的业务代码，在手动拼接的维护上甚至对展示结构的完整性有一定的风险。")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'/xx-api'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// 拼接模板")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v("`<div>")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("data"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("</div>`")])]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// 渲染到页面上")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("$")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'#xx-table'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("html")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("h2",{attrs:{id:"reactive-概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactive-概念","aria-hidden":"true"}},[t._v("#")]),t._v(" Reactive 概念")]),s("p",[t._v("我们只需要为对数据赋予新的值，所有和这个数据相关的内容都会得到响应。例如我对一个列表的数据进行 push 操作，那么这个列表数据所绑定的DOM当中也会发生动态的更新。")]),s("ul",[s("li",[t._v("一种特殊类型的对象")]),s("li",[t._v("支持响应式更新")]),s("li",[t._v("基于 Accessor 设计模式（访问者）")])]),s("p",[t._v("我们具有一个特殊类型的数据，对这个数据进行存取，都会引起一些状态的变更，所有订阅了他的事件或者绑定了和他相关的数据，都会在这个数据被访问的时候进行响应式的更新。")]),s("h2",{attrs:{id:"object-defineproperty-介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-defineproperty-介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" Object.defineProperty 介绍")]),s("p",[t._v("Object.defineProperty(obj, prop, descriptor) 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。")]),s("ul",[s("li",[t._v("ES5 标准特性")]),s("li",[t._v("参数")]),s("li",[t._v("obj 要在其上定义属性的对象")]),s("li",[t._v("prop 要定义或修改的属性的名称")]),s("li",[t._v("descriptor 将被定义或修改的属性描述符")]),s("li",[t._v("读写对象属性值时，触发事件钩子\n"),s("ul",[s("li",[t._v("get ()")]),s("li",[t._v("set ()")])])]),s("li",[t._v("局限\n"),s("ul",[s("li",[t._v("仅支持 Object，不支持 Array 与 primitive 类型")]),s("li",[t._v("动态为对象添加属性时无法触发")])])])]),s("h2",{attrs:{id:"reactive-实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactive-实现","aria-hidden":"true"}},[t._v("#")]),t._v(" Reactive 实现")]),s("ul",[s("li",[t._v("基于 defineProperty，实现 defineReactive 函数")])]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("defineReactive")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" val\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      val "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" demo "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("defineReactive")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("demo"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("123")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("demo"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考")]),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object.defineProperty")])])])])}],!1,null,null,null);a.default=e.exports}}]);