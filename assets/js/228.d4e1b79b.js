(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{1279:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"_2-1-初始化-wepy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-初始化-wepy","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1 初始化 WePY")]),a("p",[t._v("使用原生的方式开发小程序，需要四个文件的配置：")]),a("ul",[a("li",[t._v(".json ——配置文件；")]),a("li",[t._v(".wxml —— 模板文件，类似 HTML；")]),a("li",[t._v(".wxss —— 样式文件，类似 CSS；")]),a("li",[t._v(".js —— 交互逻辑。")])]),a("p",[t._v("如果你熟悉 Web 开发，那么不难想到 HTML，CSS，JS 文件之间的相互配合，使用原生的小程序开发比较繁琐，类比现在的 Web 开发，你会引入 Bootstrap 解决页面布局和样式；使用 MVVM 的 Vue/React/Angular 等前端框架；使用 Less/Sass 编写样式；使用 ES6/ES7 的新特性；使用组件化开发等等；你一定希望有一些好用的工具提升开发效率。那么对于小程序来说，有没有这样的工具呢？——首先我们需要了解的就是 WePY。")]),a("p",[a("a",{attrs:{href:"https://tencent.github.io/wepy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("WePY")]),t._v(" 是一个小程序组件化开发框架，开发风格接近 Vue.js，更贴近于 MVVM 架构模式，相比小程序原生开发要更加的方便快捷。")]),a("h2",{attrs:{id:"安装-wepy-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-wepy-cli","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 wepy-cli")]),a("p",[t._v("下面，我们来安装 WePY ，然后通过 WePY 初始化项目。")]),a("p",[t._v("首先需要全局安装 "),a("code",[t._v("wepy-cli")]),t._v("：")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yarn global add wepy-cli\n")])]),a("p",[a("img",{attrs:{src:s(574),alt:"file"}})]),a("p",[t._v("安装成功，通过命令 "),a("code",[t._v("wepy -v")]),t._v(" 可以查看到目前版本为 "),a("code",[t._v("1.7.1")]),t._v("，"),a("code",[t._v("-v")]),t._v(" 参数是 "),a("code",[t._v("--version")]),t._v(" 的缩写。")]),a("h2",{attrs:{id:"初始化项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化项目")]),a("p",[t._v("我们使用 "),a("code",[t._v("wepy init standard")]),t._v(" 来初始化项目，后面跟目录地址，我们这里选择 "),a("code",[t._v("larabbs-weapp")]),t._v(" 目录")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Code/larabbs-weapp\n$ wepy init standard ./\n")])]),a("p",[t._v("初始化是一个交互式命令行程序，请参考下图进行填写：")]),a("p",[a("img",{attrs:{src:s(573),alt:"file"}})]),a("p",[t._v("初始化项目完成，我们使用 "),a("code",[t._v("ls -al")]),t._v(" 命令来看看生成了哪些文件：")]),a("p",[a("img",{attrs:{src:s(572),alt:"file"}})]),a("p",[t._v("WePY 文件结构简介：")]),a("table",[a("thead",[a("tr",[a("th",[t._v("文件夹名称")]),a("th",[t._v("类型")]),a("th",[t._v("简介")])])]),a("tbody",[a("tr",[a("td",[t._v("dist")]),a("td",[t._v("目录")]),a("td",[t._v("存放编译后的文件")])]),a("tr",[a("td",[t._v("src")]),a("td",[t._v("目录")]),a("td",[t._v("源码文件")])]),a("tr",[a("td",[t._v("src/app.wpy")]),a("td",[t._v("目录")]),a("td",[t._v("项目入口文件")])]),a("tr",[a("td",[t._v("src/pages")]),a("td",[t._v("目录")]),a("td",[t._v("存放小程序页面")])]),a("tr",[a("td",[t._v("src/components")]),a("td",[t._v("目录")]),a("td",[t._v("存放小程序组件")])]),a("tr",[a("td",[t._v("src/mixins")]),a("td",[t._v("目录")]),a("td",[t._v("存放 Mixin 文件")])]),a("tr",[a("td",[t._v("node_modules")]),a("td",[t._v("目录")]),a("td",[t._v("NPM 依赖模块")])]),a("tr",[a("td",[t._v("src/index.template.html")]),a("td",[t._v("文件")]),a("td",[t._v("模板页面html")])]),a("tr",[a("td",[t._v("wepy.config.js")]),a("td",[t._v("文件")]),a("td",[t._v("全局配置文件")])]),a("tr",[a("td",[t._v("yarn.lock")]),a("td",[t._v("文件")]),a("td",[t._v("依赖列表，确保这个应用的副本使用相同版本的依赖")])]),a("tr",[a("td",[t._v("package.json")]),a("td",[t._v("文件")]),a("td",[t._v("项目的 package 配置")])]),a("tr",[a("td",[t._v("project.config.json")]),a("td",[t._v("文件")]),a("td",[t._v("开发者工具配置")])]),a("tr",[a("td",[t._v(".wepyignore")]),a("td",[t._v("文件")]),a("td",[t._v("WePY 忽略的文件")])]),a("tr",[a("td",[t._v(".wepycache")]),a("td",[t._v("文件")]),a("td",[t._v("WePY 缓存文件，防止在build时，重复build npm目录")])]),a("tr",[a("td",[t._v(".prettierrc")]),a("td",[t._v("文件")]),a("td",[t._v("prettier 配置文件")])]),a("tr",[a("td",[t._v(".eslintrc.js")]),a("td",[t._v("文件")]),a("td",[t._v("eslint 配置文件")])]),a("tr",[a("td",[t._v(".eslintignore")]),a("td",[t._v("文件")]),a("td",[t._v("eslint 忽略的文件")])]),a("tr",[a("td",[t._v(".editorconfig")]),a("td",[t._v("文件")]),a("td",[t._v("编辑器配置文件")])])])]),a("p",[t._v("WePY 依赖于很多 "),a("code",[t._v("node")]),t._v(" 包，接下来执行 "),a("code",[t._v("yarn")]),t._v(" 安装这些包：")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" $ yarn\n")])]),a("p",[a("img",{attrs:{src:s(571),alt:"file"}})]),a("p",[t._v("最后对项目进行编译，并持续监听代码变化：")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ wepy build --watch\n")])]),a("blockquote",[a("p",[t._v("使用 "),a("code",[t._v("npm run dev")]),t._v(" 可以达到效果的目的，注意下面的课程中默认你已经开启一个命令行窗口，并执行该命令，持续监听文件变化，不再重复强调。在 Homestead 中运行 "),a("code",[t._v("watch")]),t._v(" 可能会出现检测不到文件变化的情况，可以每次手动编译，也可以尝试在电脑中单独安装 "),a("code",[t._v("wepy-cli")]),t._v(" 并运行 "),a("code",[t._v("watch")]),t._v("。")])]),a("p",[a("img",{attrs:{src:s(570),alt:"file"}})]),a("p",[t._v("省略一些细节。")]),a("p",[a("img",{attrs:{src:s(569),alt:"file"}})]),a("p",[t._v("注意如果你遇到以下报错：")]),a("p",[a("img",{attrs:{src:s(568),alt:"file"}})]),a("p",[t._v("手动添加 util，删除 dist 目录后，重新编译即可：")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ yarn add util\n$ "),a("span",{attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf dist\n$ wepy build --watch\n")])]),a("p",[t._v("打开开发者工具，查看项目：\n"),a("img",{attrs:{src:s(567),alt:"file"}})]),a("p",[a("code",[t._v("dist")]),t._v(" 目录就是编译好的文件目录，点击右上角的 "),a("code",[t._v("详情")]),t._v("，可以看到开发者工具已经适配好 "),a("code",[t._v("WePY")]),t._v(" 框架，默认将 "),a("code",[t._v("ES6 转 ES5")]),t._v("，"),a("code",[t._v("上传代码时样式自动补全")]),t._v("，"),a("code",[t._v("代码上传时自动压缩")]),t._v(" 三个选项关闭，这里一定不要勾选这三个选项，否则调试的时候会报错。")]),a("p",[t._v("WePY 已经为我们创建了一些示例代码，大家可以尝试一下做个了解。")]),a("blockquote",[a("p",[t._v("注意：由于微信不再支持 getUserInfo 接口，使用该接口将不再出现授权弹窗，需要使用 "),a("code",[t._v('<button open-type="getUserInfo"></button>')]),t._v(" 引导用户主动进行授权操作。示例代码中任然在使用该接口，所以有可能你看不到上图中的授权框，不过不影响本教程的学习，之后的课程我们并未使用该接口。")])]),a("h2",{attrs:{id:"代码版本控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码版本控制","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码版本控制")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Code/larabbs-weapp\n$ "),a("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" add -A\n$ "),a("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{attrs:{class:"token string"}},[t._v("'wepy init'")]),t._v("\n")])])])}],_=s(0),v=Object(_.a)({},function(){this.$createElement;this._self._c;return this._m(0)},a,!1,null,null,null);e.default=v.exports},567:function(t,e,s){t.exports=s.p+"assets/img/2.1_8.f44c9e37.png"},568:function(t,e,s){t.exports=s.p+"assets/img/2.1_7.9a50dbee.png"},569:function(t,e,s){t.exports=s.p+"assets/img/2.1_6.b1613eab.png"},570:function(t,e,s){t.exports=s.p+"assets/img/2.1_5.8da22139.png"},571:function(t,e,s){t.exports=s.p+"assets/img/2.1_4.ecfc1a0c.png"},572:function(t,e,s){t.exports=s.p+"assets/img/2.1_3.c563a705.png"},573:function(t,e,s){t.exports=s.p+"assets/img/2.1_2.92dfa0d3.png"},574:function(t,e,s){t.exports=s.p+"assets/img/2.1_1.da2e5d96.png"}}]);