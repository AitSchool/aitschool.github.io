(window.webpackJsonp=window.webpackJsonp||[]).push([[450],{1190:function(a,t,s){a.exports=s.p+"assets/img/1.1_1.76ea51b0.png"},1611:function(a,t,s){"use strict";s.r(t);var e=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"content"},[e("h2",{attrs:{id:"_1-1-创建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-创建应用","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.1 创建应用")]),e("p",[a._v("第一个应用，Hello Laravel！")]),e("p",[a._v("这一节我们来创建一个基本的 Hello World Laravel 应用。上一节已经把环境部署好了，在上节的最后我们关闭了虚拟机。此时我们得先开启 Homestead 虚拟机：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("> cd ~/Homestead && vagrant up\n> vagrant ssh\n")])]),e("p",[a._v("虚拟机启动成功后，通过下面命令来新建一个名为 Laravel 的项目：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Code\n$ composer create-project laravel/laravel laravel-weibo --prefer-dist "),e("span",{attrs:{class:"token string"}},[a._v('"5.7.*"')]),a._v("\n")])]),e("h2",{attrs:{id:"修改-hosts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hosts","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改 hosts")]),e("p",[a._v("每个 Laravel 项目创建完成后的第一步，即是对 Homestead 进行配置，让应用能在 Homestead 的开发环境上跑起来。")]),e("p",[a._v("为了方便记忆，一般我们都会将 IP 映射为域名，我们能够通过设置 hosts 文件来指定 IP 与域名之间的映射关系，由于我们在 Homestead 上默认使用 192.168.10.10 来作为虚拟机的 IP 的地址，因此我们需要在系统的 hosts 文件中将域名指向该 IP 上。")]),e("p",[a._v("Mac 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl /etc/hosts\n")])]),e("p",[a._v("Windows 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl C:/Windows/System32/Drivers/etc/hosts\n")])]),e("blockquote",[e("blockquote",[e("p",[a._v("Windows 下，如果你没有集成 subl 命令的话， 请使用编辑器直接打开文件，文件路径在 "),e("code",[a._v("C:\\Windows\\System32\\Drivers\\etc\\hosts")])])])]),e("p",[a._v("文件成功打开后，在 "),e("code",[a._v("hosts")]),a._v(" 文件最后面新增下面一行以完成设置：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("192.168.10.10   laraweibo.tv\n")])]),e("h2",{attrs:{id:"新增站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新增站点","aria-hidden":"true"}},[a._v("#")]),a._v(" 新增站点")]),e("p",[a._v("运行下面命令打开 "),e("code",[a._v("Homestead.yaml")]),a._v(" 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" subl ~/Homestead/Homestead.yaml\n")])]),e("p",[a._v("在 Homestead.yaml 文件中新增 "),e("code",[a._v("laravel-weibo")]),a._v(" 应用的 "),e("code",[a._v("sites")]),a._v(" 和 "),e("code",[a._v("databases")]),a._v(" 的相关设置：")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v("--")]),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v("\nip"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token string"}},[a._v('"192.168.10.10"')]),a._v("\nmemory"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("2048")]),a._v("\ncpus"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("1")]),a._v("\nprovider"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" virtualbox\n\nauthorize"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("~")]),e("span",{attrs:{class:"token operator"}},[a._v("/")]),e("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ssh"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("id_rsa"),e("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pub\n\nkeys"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("~")]),e("span",{attrs:{class:"token operator"}},[a._v("/")]),e("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ssh"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("id_rsa\n\nfolders"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" map"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("~")]),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("Code\n      to"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("home"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("vagrant"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("Code\n\nsites"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" map"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" homestead"),e("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("test\n      to"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("home"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("vagrant"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("Code"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("Laravel"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),e("span",{attrs:{class:"token keyword"}},[a._v("public")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" map"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" laravel"),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v("weibo"),e("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tv # "),e("span",{attrs:{class:"token operator"}},[a._v("<")]),e("span",{attrs:{class:"token operator"}},[a._v("--")]),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" 这里\n      to"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("home"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("vagrant"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("Code"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),a._v("laravel"),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v("weibo"),e("span",{attrs:{class:"token operator"}},[a._v("/")]),e("span",{attrs:{class:"token keyword"}},[a._v("public")]),a._v(" # "),e("span",{attrs:{class:"token operator"}},[a._v("<")]),e("span",{attrs:{class:"token operator"}},[a._v("--")]),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" 这里\n\ndatabases"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" homestead\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" weibo # "),e("span",{attrs:{class:"token operator"}},[a._v("<")]),e("span",{attrs:{class:"token operator"}},[a._v("--")]),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" 这里\n\nvariables"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" key"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token constant"}},[a._v("APP_ENV")]),a._v("\n      value"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" local\n\n# blackfire"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n#     "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" id"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" foo\n#       token"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bar\n#       client"),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v("id"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" foo\n#       client"),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v("token"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bar\n\n# ports"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n#     "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" send"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("93000")]),a._v("\n#       to"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("9300")]),a._v("\n#     "),e("span",{attrs:{class:"token operator"}},[a._v("-")]),a._v(" send"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("7777")]),a._v("\n#       to"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{attrs:{class:"token number"}},[a._v("777")]),a._v("\n#       protocol"),e("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" udp\n")])]),e("p",[a._v("我们主要设置了 "),e("code",[a._v("sites")]),a._v(" 和 "),e("code",[a._v("databases")]),a._v(" 两项。 "),e("code",[a._v("sites")]),a._v(" 会将域名 "),e("code",[a._v("laraweibo.tv")]),a._v(" 映射到虚拟机的 "),e("code",[a._v("/home/vagrant/Code/laravel-weibo/public")]),a._v(" 文件夹上，而 "),e("code",[a._v("databases")]),a._v(" 则为新创建的项目指定数据库名。")]),e("h2",{attrs:{id:"重启虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启虚拟机","aria-hidden":"true"}},[a._v("#")]),a._v(" 重启虚拟机")]),e("p",[a._v("在我们每次对 "),e("code",[a._v("Homestead.yaml")]),a._v(" 文件进行了更改之后，都需要运行下面命令来使其更改生效：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/Homestead "),e("span",{attrs:{class:"token operator"}},[a._v("&&")]),a._v(" vagrant provision "),e("span",{attrs:{class:"token operator"}},[a._v("&&")]),a._v(" vagrant reload\n")])]),e("ul",[e("li",[e("code",[a._v("vagrant provision")]),a._v(" 是命令 Vagrant 重新加载 "),e("code",[a._v("Homestead.yaml")]),a._v(" 配置；")]),e("li",[e("code",[a._v("vagrant reload")]),a._v(" 是重启虚拟机使更改生效。")])]),e("h2",{attrs:{id:"env-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env-文件","aria-hidden":"true"}},[a._v("#")]),a._v(" .env 文件")]),e("p",[a._v("接下来，我们还需要对应用根目录下的 "),e("code",[a._v(".env")]),a._v(" 文件进行设置，为应用指定数据库名称 "),e("code",[a._v("weibo")]),a._v("。")]),e("p",[e("em",[a._v(".env")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(".\n.\n.\nDB_DATABASE=weibo\n.\n.\n.\n")])]),e("p",[a._v("在 "),e("code",[a._v(".env")]),a._v(" 文件中，除了 "),e("code",[a._v("DB_DATABASE")]),a._v(" 之外还有其它的设置信息，接下来让我们对里面的几项配置信息进行简单讲解。")]),e("p",[a._v("一般来说，在进行实际应用的开发过程中，应用会拥有不同的运行环境，通常会有以下环境：")]),e("ul",[e("li",[a._v("本地开发环境")]),e("li",[a._v("测试环境")]),e("li",[a._v("生产环境")])]),e("p",[a._v("在不同环境中，我们可能会使用不同的数据库或邮件发送驱动等配置，这时候则需要通过 "),e("code",[a._v(".env")]),a._v(" 文件来针对不同的运行环境作不同的设置。比如上面我们所编辑的 "),e("code",[a._v(".env")]),a._v(" 文件配置将应用在本地的开发环境（local）上。")]),e("p",[e("code",[a._v(".env")]),a._v(" 支持对应用的进行简单配置，比如你可以通过 "),e("code",[a._v("APP_ENV")]),a._v(" 来设定当前应用的运行环境，使用 "),e("code",[a._v("APP_DEBUG")]),a._v(" 来设定是否在应用报错时显示调试信息，使用 "),e("code",[a._v("APP_KEY")]),a._v(" 来生成应用的密钥用于加密一些较为敏感的数据。")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("APP_ENV=local\nAPP_DEBUG=true\nAPP_KEY=your_app_key\n")])]),e("p",[a._v("我们也可以对数据库的连接方式、数据库名、用户名密码等做相关配置：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("DB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_DATABASE=weibo\nDB_USERNAME=homestead\nDB_PASSWORD=secret\n")])]),e("p",[a._v("缓存、会话、队列等驱动的相关配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("CACHE_DRIVER=file\nSESSION_DRIVER=file\nQUEUE_DRIVER=sync\n")])]),e("p",[a._v("Redis 相关的配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("REDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n")])]),e("p",[a._v("邮件相关的配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("MAIL_DRIVER=smtp\nMAIL_HOST=mailtrap.io\nMAIL_PORT=2525\nMAIL_USERNAME=null\nMAIL_PASSWORD=null\nMAIL_ENCRYPTION=null\n")])]),e("p",[a._v("在完成对 "),e("code",[a._v(".env")]),a._v(" 文件的设置后，我们便可以通过传参给 "),e("code",[a._v("getenv")]),a._v(" 方法来获取到 "),e("code",[a._v(".env")]),a._v(" 文件中指定的值，如调用 "),e("code",[a._v("getenv('APP_ENV')")]),a._v(" 将返回 "),e("code",[a._v("local")]),a._v("。")]),e("h2",{attrs:{id:"访问应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问应用","aria-hidden":"true"}},[a._v("#")]),a._v(" 访问应用")]),e("p",[a._v("完成之后，访问 http://laraweibo.tv 你能看到如下图所示界面，这是 Laravel 为我们生成默认界面。")]),e("p",[e("img",{attrs:{src:s(1190),alt:"file"}})]),e("blockquote",[e("p",[a._v("注：建议使用 "),e("code",[a._v("composer create-project")]),a._v(" 命令来进行创建 Laravel 项目，这样能利用 Composer 的本地缓存功能和 "),e("a",{attrs:{href:"https://laravel-china.org/topics/4484/composer-mirror-use-help",target:"_blank",rel:"noopener noreferrer"}},[a._v("Composer 中文镜像")]),a._v(" 来达到下载速度最优，尤其是后续的项目创建。")])]),e("p",[a._v("打开 Code 文件夹可以看到刚刚创建的 Laravel 应用，Laravel 默认会为我们生成了一堆文件和文件夹，每一个文件的置放目录和位置都有它的用意。这些目录结构都是经过 Laravel 作者精心设计的，为的就是统一开发规范，强调约定高于配置的原则。")])])}],n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);t.default=o.exports}}]);