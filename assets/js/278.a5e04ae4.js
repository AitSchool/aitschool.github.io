(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{1354:function(i,t,a){"use strict";a.r(t);var s=[function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"_2-1-手机注册流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-手机注册流程","aria-hidden":"true"}},[i._v("#")]),i._v(" 2.1 手机注册流程")]),s("p",[i._v("无论是 App 还是网站，手机注册已经成为商业项目的最基本功能，下面我们通过『知乎App』来拆解一下手机注册的流程。")]),s("h2",{attrs:{id:"_1-注册示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-注册示例","aria-hidden":"true"}},[i._v("#")]),i._v(" 1. 注册示例")]),s("p",[i._v("首先来看一下『知乎App』的注册流程，注意知乎『未注册手机验证后自动登录』，登录与注册流程相同。")]),s("p",[s("img",{attrs:{src:a(756),alt:"file"}})]),s("ol",[s("li",[i._v("输入手机号，点击登录")]),s("li",[i._v("输入正确的图片验证码，点击验证，知乎会发送验证码至刚刚填写的手机")]),s("li",[i._v("提交正确的短信验证码后，注册完成")])]),s("h2",{attrs:{id:"_2-流程分解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-流程分解","aria-hidden":"true"}},[i._v("#")]),i._v(" 2. 流程分解")]),s("p",[i._v("拆解一下注册流程，如图所示")]),s("p",[s("img",{attrs:{src:a(755),alt:"file"}})]),s("p",[i._v("流程详解：")]),s("ol",[s("li",[i._v("用户输入手机号，请求图片验证码接口；")]),s("li",[i._v("服务器返回图片验证码；")]),s("li",[i._v("使用正确的图片验证码，请求短信验证码；")]),s("li",[i._v("服务器调用短信运营商的接口，发送短信至用户手机；")]),s("li",[i._v("通过正确的短信验证码，请求用户注册接口；")]),s("li",[i._v("完成注册流程。")])]),s("p",[i._v("上面的流程中，我们需要下面三个资源")]),s("ul",[s("li",[i._v("captchas —— 图片验证码")]),s("li",[i._v("verificationCodes —— 短信验证码")]),s("li",[i._v("users —— 用户")])]),s("p",[i._v("对应着三个资源，我们设计出对应的三个接口")]),s("ul",[s("li",[i._v("POST api/captchas  创建图片验证码")]),s("li",[i._v("POST api/verificationCodes  发送短信验证码")]),s("li",[i._v("POST api/users   用户注册")])]),s("blockquote",[s("p",[i._v("关于注册，可能常见的注册接口会设计为"),s("code",[i._v("api/signUp")]),i._v(" 或 "),s("code",[i._v("api/register")]),i._v("，这样的设计没什么问题，不过回忆一下我们的 RESTful 原则，资源尽量不要用动词，那么注册这件事，实质上是在服务器上创建了用户资源。所以设计成 "),s("code",[i._v("POST api/users")]),i._v(" 更为合适。")])]),s("p",[i._v("我们可以像知乎这类 APP 一样，用户手机注册后，再跳转到用户信息设置页面，更新用户名，密码等信息。但是结合 Larabbs 已有的注册流程，我们可以在用户注册流程的最后一步，要求用户提交用户名，密码以及短信验证码来完成注册。")]),s("p",[i._v("整理下来，我们的注册流程如下：")]),s("ul",[s("li",[i._v("用户输入手机号")]),s("li",[i._v("通过手机号请求图片验证码，显示给用户")]),s("li",[i._v("用户输入正确的图片验证码，服务器发送验证码至用户手机")]),s("li",[i._v("用户填写，姓名，密码，及正确的短信验证码，完成注册")])]),s("p",[i._v("接下来我们将一步步讲解。")])])}],e=a(0),_=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},s,!1,null,null,null);t.default=_.exports},755:function(i,t,a){i.exports=a.p+"assets/img/2.1_2.5cde5350.png"},756:function(i,t,a){i.exports=a.p+"assets/img/2.1_1.656858a2.png"}}]);