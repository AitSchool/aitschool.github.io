(window.webpackJsonp=window.webpackJsonp||[]).push([[331],{1433:function(a,t,e){"use strict";e.r(t);var r=[function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"content"},[r("h1",{attrs:{id:"_3-2-代码生成器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-代码生成器","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.2 代码生成器")]),r("h2",{attrs:{id:"说明"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#说明","aria-hidden":"true"}},[a._v("#")]),a._v(" 说明")]),r("p",[a._v("在『Laravel 教程』系列课程中，我们开发时遵守的代码风格是 "),r("a",{attrs:{href:"https://laravel-china.org/courses/laravel-specification",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laravel 项目开发规范")]),a._v("。遵照此规范，在实际操作中，有许多重复，接下来推荐一款专为此规范量身定制的代码生成器 —— "),r("a",{attrs:{href:"https://github.com/summerblue/generator",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laravel 5.x Scaffold Generator")]),a._v(" 。代码生成器能让你通过执行一条 Artisan 命令，完成注册路由、新建模型、新建表单验证类、新建资源控制器以及所需视图文件等任务，不仅约束了项目开发的风格，还能极大地提高我们的开发效率。")]),r("p",[a._v("在接下来的 LaraBBS 项目开发中，我们将利用此扩展来快速构建项目原型。")]),r("blockquote",[r("p",[a._v("后续章节我们将『Laravel 5.x Scaffold Generator』简称为『代码生成器』，或者『生成器』。")])]),r("h2",{attrs:{id:"安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装")]),r("h3",{attrs:{id:"_1-通过-composer-安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-通过-composer-安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 1. 通过 Composer 安装")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ composer require "),r("span",{attrs:{class:"token string"}},[a._v('"summerblue/generator:~0.5"')]),a._v(" --dev\n")])]),r("h3",{attrs:{id:"_2-版本标记"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-版本标记","aria-hidden":"true"}},[a._v("#")]),a._v(" 2. 版本标记")]),r("p",[a._v("在测试之前，我们先把代码纳入到版本管理，做个版本标记，以便后续测试的代码回滚：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" add -A\n$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" commit -m "),r("span",{attrs:{class:"token string"}},[a._v('"Add generator"')]),a._v("\n")])]),r("h3",{attrs:{id:"_3-试运行"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-试运行","aria-hidden":"true"}},[a._v("#")]),a._v(" 3. 试运行")]),r("p",[a._v("接下来我们可以放心的测试，运行 "),r("a",{attrs:{href:"https://github.com/summerblue/generator",target:"_blank",rel:"noopener noreferrer"}},[a._v("generator")]),a._v(" 的 readme 里提供的示例：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ php artisan make:scaffold Projects --schema"),r("span",{attrs:{class:"token operator"}},[a._v("=")]),r("span",{attrs:{class:"token string"}},[a._v('"name:string:index,description:text:nullable,subscriber_count:integer:unsigned:default(0)"')]),a._v("\n")])]),r("p",[a._v("我们在命令行中指定了数据模型还有具体的字段信息，运行命令后，generator 帮我们生成了一堆文件，并在最后执行了数据库迁移：")]),r("p",[r("img",{attrs:{src:e(971),alt:"file"}})]),r("p",[a._v("我们将会在下一个章节中具体讲解所有生成的文件，接下来让我们还原项目到正常状态，首先回滚数据库迁移：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ php artisan migrate:rollback\n")])]),r("p",[a._v("还原修改文件到原始状态：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" checkout "),r("span",{attrs:{class:"token keyword"}},[a._v(".")]),a._v(" \n")])]),r("p",[a._v("查看文件修改状态：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" status\n")])]),r("p",[a._v("输出：")]),r("p",[r("img",{attrs:{src:e(970),alt:"file"}})]),r("p",[a._v("可以看出剩下的是新建的文件，接下来使用下面命令还原：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" clean -f -d \n")])]),r("p",[a._v("命令 "),r("code",[a._v("git clean")]),a._v(" 作用是清理项目，"),r("code",[a._v("-f")]),a._v(" 是强制清理文件的设置，"),r("code",[a._v("-d")]),a._v(" 选项命令连文件夹一并清除。执行成功后再使用：")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ "),r("span",{attrs:{class:"token function"}},[a._v("git")]),a._v(" status\n")])]),r("p",[a._v("即可看到 "),r("code",[a._v("nothing to commit, working directory clean")]),a._v(" 的提示信息，表示项目文件已经清理干净，我们可以继续下一章节的学习。")])])}],s=e(0),n=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},r,!1,null,null,null);t.default=n.exports},970:function(a,t,e){a.exports=e.p+"assets/img/3.2_2.9f2c4d28.png"},971:function(a,t,e){a.exports=e.p+"assets/img/3.2_1.31ddd89e.png"}}]);