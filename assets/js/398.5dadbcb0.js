(window.webpackJsonp=window.webpackJsonp||[]).push([[398],{1137:function(t,s,a){t.exports=a.p+"assets/img/1.1_2.b0a7a176.png"},1138:function(t,s,a){t.exports=a.p+"assets/img/1.1_1.8c904fb6.png"},1533:function(t,s,a){"use strict";a.r(s);var e=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"_1-1-创建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-创建应用","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 创建应用")]),e("p",[t._v("由于我们接下来的开发都会在 Homestead 上进行，因此，在开始本章教程之前，请保证你的 Homestead 虚拟机已成功开启并登录。使用下面命令来启动和登录 Homestead：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Homestead "),e("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" vagrant up\n"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" vagrant "),e("span",{attrs:{class:"token function"}},[t._v("ssh")]),t._v("\n")])]),e("p",[t._v("在虚拟机中进入 Code 文件夹：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Code\n")])]),e("h2",{attrs:{id:"创建-sample-应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-sample-应用","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建 sample 应用")]),e("p",[t._v("下面让我们来使用 Composer 创建一个名为 sample 的应用，后面我们将基于这个应用做更多的功能完善：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Code\n$ composer create-project laravel/laravel sample --prefer-dist "),e("span",{attrs:{class:"token string"}},[t._v('"5.5.*"')]),t._v("\n")])]),e("p",[e("img",{attrs:{src:a(1138),alt:"file"}})]),e("h2",{attrs:{id:"修改-hosts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hosts","aria-hidden":"true"}},[t._v("#")]),t._v(" 修改 hosts")]),e("p",[t._v("每个 Laravel 项目创建完成后的第一步，即是对 Homestead 进行配置，让应用能在 Homestead 的开发环境上跑起来。")]),e("p",[t._v("为了方便记忆，一般我们都会将 IP 映射为域名，我们能够通过设置 hosts 文件来指定 IP 与域名之间的映射关系，由于我们在 Homestead 上默认使用 "),e("code",[t._v("192.168.10.10")]),t._v(" 来作为虚拟机的 IP 的地址，因此我们需要在系统的 "),e("code",[t._v("hosts")]),t._v(" 文件中将域名指向该 IP 上。")]),e("p",[t._v("Mac 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" subl /etc/hosts\n")])]),e("p",[t._v("Windows 下打开 Hosts 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" subl C:/Windows/System32/Drivers/etc/hosts\n")])]),e("blockquote",[e("p",[t._v("Windows 下，如果你没有集成 "),e("code",[t._v("subl")]),t._v(" 命令的话， 请使用编辑器直接打开文件，文件路径在 "),e("code",[t._v("C:\\Windows\\System32\\Drivers\\etc\\hosts")]),t._v(" 。")])]),e("p",[t._v("文件成功打开后，在 "),e("code",[t._v("hosts")]),t._v(" 文件最后面新增下面一行以完成设置：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("192.168.10.10   sample.test\n")])]),e("h2",{attrs:{id:"新增站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新增站点","aria-hidden":"true"}},[t._v("#")]),t._v(" 新增站点")]),e("p",[t._v("运行下面命令打开 "),e("code",[t._v("Homestead.yaml")]),t._v(" 文件：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" subl ~/Homestead/Homestead.yaml\n")])]),e("p",[t._v("在 "),e("code",[t._v("Homestead.yaml")]),t._v(" 文件中新增 "),e("code",[t._v("sample")]),t._v(" 应用的 "),e("code",[t._v("sites")]),t._v(" 和 "),e("code",[t._v("databases")]),t._v(" 的相关设置：")]),e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("ip")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"192.168.10.10"')]),t._v("\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("memory")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token number"}},[t._v("2048")]),t._v("\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("cpus")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("provider")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" virtualbox\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("authorize")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/.ssh/id_rsa.pub\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("keys")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ~/.ssh/id_rsa\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("folders")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{attrs:{class:"token key atrule"}},[t._v("map")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/Code\n      "),e("span",{attrs:{class:"token key atrule"}},[t._v("to")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /home/vagrant/Code\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("sites")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{attrs:{class:"token key atrule"}},[t._v("map")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" homestead.test\n      "),e("span",{attrs:{class:"token key atrule"}},[t._v("to")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /home/vagrant/Code/Laravel/public\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{attrs:{class:"token key atrule"}},[t._v("map")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sample.test "),e("span",{attrs:{class:"token comment"}},[t._v("# <--- 这里")]),t._v("\n      "),e("span",{attrs:{class:"token key atrule"}},[t._v("to")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /home/vagrant/Code/sample/public "),e("span",{attrs:{class:"token comment"}},[t._v("# <--- 这里")]),t._v("\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("databases")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" homestead\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sample "),e("span",{attrs:{class:"token comment"}},[t._v("# <--- 这里")]),t._v("\n\n"),e("span",{attrs:{class:"token key atrule"}},[t._v("variables")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{attrs:{class:"token key atrule"}},[t._v("key")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" APP_ENV\n      "),e("span",{attrs:{class:"token key atrule"}},[t._v("value")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" local\n\n"),e("span",{attrs:{class:"token comment"}},[t._v("# blackfire:")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#     - id: foo")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       token: bar")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       client-id: foo")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       client-token: bar")]),t._v("\n\n"),e("span",{attrs:{class:"token comment"}},[t._v("# ports:")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#     - send: 93000")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       to: 9300")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#     - send: 7777")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       to: 777")]),t._v("\n"),e("span",{attrs:{class:"token comment"}},[t._v("#       protocol: udp")]),t._v("\n")])]),e("p",[t._v("我们主要设置了 "),e("code",[t._v("sites")]),t._v(" 和 "),e("code",[t._v("databases")]),t._v(" 两项。 "),e("code",[t._v("sites")]),t._v(" 会将域名 "),e("code",[t._v("sample.test")]),t._v(" 映射到虚拟机的 "),e("code",[t._v("/home/vagrant/Code/sample/public")]),t._v(" 文件夹上，而 "),e("code",[t._v("databases")]),t._v(" 则为新创建的项目指定数据库名。")]),e("h2",{attrs:{id:"重启虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启虚拟机","aria-hidden":"true"}},[t._v("#")]),t._v(" 重启虚拟机")]),e("p",[t._v("在我们每次对 "),e("code",[t._v("Homestead.yaml")]),t._v(" 文件进行了更改之后，都需要运行下面命令来使其更改生效：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Homestead "),e("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" vagrant provision "),e("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" vagrant reload\n")])]),e("ul",[e("li",[e("code",[t._v("vagrant provision")]),t._v(" 是命令 Vagrant 重新加载 "),e("code",[t._v("Homestead.yaml")]),t._v(" 配置；")]),e("li",[e("code",[t._v("vagrant reload")]),t._v(" 是重启虚拟机使更改生效。")])]),e("h2",{attrs:{id:"env-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env-文件","aria-hidden":"true"}},[t._v("#")]),t._v(" .env 文件")]),e("p",[t._v("接下来，我们还需要对应用根目录下的 "),e("code",[t._v(".env")]),t._v(" 文件进行设置，为应用指定数据库名称 "),e("code",[t._v("sample")]),t._v("。")]),e("p",[e("em",[t._v(".env")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".\n.\n.\nDB_DATABASE=sample\n.\n.\n.\n")])]),e("p",[t._v("在 "),e("code",[t._v(".env")]),t._v(" 文件中，除了 "),e("code",[t._v("DB_DATABASE")]),t._v(" 之外还有其它的设置信息，接下来让我们对里面的几项配置信息进行简单讲解。")]),e("p",[t._v("一般来说，在进行实际应用的开发过程中，应用会拥有不同的运行环境，通常会有以下环境：")]),e("ul",[e("li",[t._v("本地开发环境")]),e("li",[t._v("测试环境")]),e("li",[t._v("生产环境")])]),e("p",[t._v("在不同环境中，我们可能会使用不同的数据库或邮件发送驱动等配置，这时候则需要通过 "),e("code",[t._v(".env")]),t._v(" 文件来针对不同的运行环境作不同的设置。比如上面我们所编辑的 "),e("code",[t._v(".env")]),t._v(" 文件配置将应用在本地的开发环境（local）上。")]),e("p",[e("code",[t._v(".env")]),t._v(" 支持对应用的进行简单配置，比如你可以通过 "),e("code",[t._v("APP_ENV")]),t._v(" 来设定当前应用的运行环境，使用 "),e("code",[t._v("APP_DEBUG")]),t._v(" 来设定是否在应用报错时显示调试信息，使用 "),e("code",[t._v("APP_KEY")]),t._v(" 来生成应用的密钥用于加密一些较为敏感的数据。")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("APP_ENV=local\nAPP_DEBUG=true\nAPP_KEY=your_app_key\n")])]),e("p",[t._v("我们也可以对数据库的连接方式、数据库名、用户名密码等做相关配置：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("DB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_DATABASE=sample\nDB_USERNAME=homestead\nDB_PASSWORD=secret\n")])]),e("p",[t._v("缓存、会话、队列等驱动的相关配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("CACHE_DRIVER=file\nSESSION_DRIVER=file\nQUEUE_DRIVER=sync\n")])]),e("p",[t._v("Redis 相关的配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("REDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n")])]),e("p",[t._v("邮件相关的配置信息：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("MAIL_DRIVER=smtp\nMAIL_HOST=mailtrap.io\nMAIL_PORT=2525\nMAIL_USERNAME=null\nMAIL_PASSWORD=null\nMAIL_ENCRYPTION=null\n")])]),e("p",[t._v("在完成对 "),e("code",[t._v(".env")]),t._v(" 文件的设置后，我们便可以通过传参给 "),e("code",[t._v("getenv")]),t._v(" 方法来获取到 "),e("code",[t._v(".env")]),t._v(" 文件中指定的值，如调用 "),e("code",[t._v("getenv('APP_ENV')")]),t._v(" 将返回 "),e("code",[t._v("local")]),t._v("。")]),e("h2",{attrs:{id:"访问应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问应用","aria-hidden":"true"}},[t._v("#")]),t._v(" 访问应用")]),e("p",[t._v("现在让我们在 Chrome 浏览器中打开 http://sample.test 你应该能看到有如下界面显示：")]),e("p",[e("img",{attrs:{src:a(1137),alt:"file"}})]),e("h2",{attrs:{id:"git-代码版本控制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-代码版本控制","aria-hidden":"true"}},[t._v("#")]),t._v(" Git 代码版本控制")]),e("p",[t._v("为了在接下来更好的追踪项目代码的更改，我们还需要将新建的 Laravel 项目纳入到 Git 版本管理中：")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Code/sample\n$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" add -A\n$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{attrs:{class:"token string"}},[t._v('"Initial commit"')]),t._v("\n")])]),e("p",[t._v("我们前面已讨论过关于使用 GitHub 的种种好处，而现在是我们开始正式应用它的时候了。熟悉一个东西最快的方法就是不断训练，不断重复，因此本教程接下来项目构建的代码都将统一托管到 GitHub 上，以便让你对 GitHub 的使用更加熟悉。现在，我们需要在 GitHub 上新建一个名为 "),e("code",[t._v("sample")]),t._v(" 的项目 "),e("a",{attrs:{href:"https://github.com/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击创建新项目")]),t._v("，并将代码推送上去：")]),e("p",[t._v("注意请把下面的 "),e("code",[t._v("<username>")]),t._v(" 替换为你的用户名。")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" remote add origin git@github.com:"),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("username"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("/sample.git\n$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" push -u origin master\n")])]),e("h2",{attrs:{id:"代码风格"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码风格","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码风格")]),e("p",[t._v("为了保证我们的代码风格一致，以避免引起不必要的歧义，我们在『开发环境布置』课程中，已经安装了 EditorConfig 插件。现在我们还需要在 Laravel 应用的根目录下添加 "),e("code",[t._v(".editorconfig")]),t._v(" 文件，并写入如下的配置信息：")]),e("p",[e("em",[t._v(".editorconfig")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# coding styles between different editors and IDEs\n# editorconfig.org\n\nroot = true\n\n[*]\n\n# Change these settings to your own preference\nindent_style = space\nindent_size = 4\n\n# We recommend you to keep these unchanged\nend_of_line = lf\ncharset = utf-8\ntrim_trailing_whitespace = true\ninsert_final_newline = false\n\n[*.{js,html,blade.php,css,scss}]\nindent_style = space\nindent_size = 4\n\n[*.md]\ntrim_trailing_whitespace = false\n")])]),e("p",[t._v("接着让我们将该文件加入到版本控制中。")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" add -A\n$ "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{attrs:{class:"token string"}},[t._v('"Add .editorconfig"')]),t._v("\n")])])])}],n=a(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);s.default=o.exports}}]);